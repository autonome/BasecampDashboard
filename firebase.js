(function() {function g(a){throw a;}var i=void 0,k=!0,l=null,m=!1;function aa(a){return function(){return this[a]}}function p(a){return function(){return a}}var r,ba=this;function ca(){}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function s(a){return a!==i}function ea(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function u(a){return"string"==typeof a}function fa(a){return"number"==typeof a}function ga(a){var b=typeof a;return"object"==b&&a!=l||"function"==b}Math.floor(2147483648*Math.random()).toString(36);function ha(a,b,c){return a.call.apply(a.bind,arguments)}
function ia(a,b,c){a||g(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function w(a,b,c){w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ha:ia;return w.apply(l,arguments)}function ja(a,b){function c(){}c.prototype=b.prototype;a.Zc=b.prototype;a.prototype=new c};function ka(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}g(Error("Invalid JSON string: "+a))}function la(){this.sb=i}
function ma(a,b,c){switch(typeof b){case "string":na(b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(b==l){c.push("null");break}if("array"==da(b)){var d=b.length;c.push("[");for(var e="",f=0;f<d;f++)c.push(e),e=b[f],ma(a,a.sb?a.sb.call(b,String(f),e):e,c),e=",";c.push("]");break}c.push("{");d="";for(f in b)Object.prototype.hasOwnProperty.call(b,f)&&(e=b[f],"function"!=typeof e&&(c.push(d),
na(f,c),c.push(":"),ma(a,a.sb?a.sb.call(b,f,e):e,c),d=","));c.push("}");break;case "function":break;default:g(Error("Unknown type: "+typeof b))}}var oa={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},pa=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;
function na(a,b){b.push('"',a.replace(pa,function(a){if(a in oa)return oa[a];var b=a.charCodeAt(0),e="\\u";16>b?e+="000":256>b?e+="00":4096>b&&(e+="0");return oa[a]=e+b.toString(16)}),'"')};function y(a){if("undefined"!==typeof JSON&&s(JSON.stringify))a=JSON.stringify(a);else{var b=[];ma(new la,a,b);a=b.join("")}return a};function qa(a){for(var b=[],c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);128>e?b[c++]=e:(2048>e?b[c++]=e>>6|192:(b[c++]=e>>12|224,b[c++]=e>>6&63|128),b[c++]=e&63|128)}return b};function z(a,b,c,d){var e;d<b?e="at least "+b:d>c&&(e=0===c?"none":"no more than "+c);e&&g(Error(a+" failed: Was called with "+d+(1===d?" argument.":" arguments.")+" Expects "+e+"."))}
function A(a,b,c){var d="";switch(b){case 1:d=c?"first":"First";break;case 2:d=c?"second":"Second";break;case 3:d=c?"third":"Third";break;case 4:d=c?"fourth":"Fourth";break;default:ra.assert(m,"errorPrefix_ called with argumentNumber > 4.  Need to update it?")}a+=" failed: ";c&&(a+="If provided, ");return a+(d+" argument ")}function B(a,b,c,d){(!d||s(c))&&"function"!=da(c)&&g(Error(A(a,b,d)+"must be a valid function."))};var sa={},ra={},ua=/[\[\].#$\/]/,va=/[\[\].#$]/;function wa(a){return u(a)&&0!==a.length&&!ua.test(a)}function xa(a,b,c){(!c||s(b))&&ya(A(a,1,c),b)}
function ya(a,b,c){c||(c=0);s(b)||g(Error(a+"contains undefined."));"function"==da(b)&&g(Error(a+"contains a function."));1E3<c&&g(new TypeError(a+"contains a cyclic object value."));u(b)&&(b.length>10485760/3&&10485760<sa.$c.Yc(b).length)&&g(Error(a+"contains a string greater than 10485760 utf8 bytes ('"+b.substring(0,50)+"...')"));if(ga(b))for(var d in b)b.hasOwnProperty(d)&&(".priority"!==d&&(".value"!==d&&!wa(d))&&g(Error(a+"contains an invalid key ("+d+').  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')),
ya(a,b[d],c+1))}function za(a,b,c,d){(!d||s(c))&&(c!==l&&!fa(c)&&!u(c))&&g(Error(A(a,b,d)+"must be a valid firebase priority (null or a string.)"))}function Aa(a,b,c){if(!c||s(b))switch(b){case "value":case "child_added":case "child_removed":case "child_changed":case "child_moved":break;default:g(Error(A(a,1,c)+'must be a valid event type: "value", "child_added", "child_removed", "child_changed", or "child_moved".'))}}
function Ba(a,b){s(b)&&!wa(b)&&g(Error(A(a,2,k)+'must be a valid firebase key (non-empty string, not containing ".", "#", "$", "/", "[", or "]").'))}function Ca(a,b){(!u(b)||0===b.length||va.test(b))&&g(Error(A(a,1,m)+'must be a non-empty string and can\'t contain ".", "#", "$", "[", or "]".'))}function C(a,b){".info"===E(b)&&g(Error(a+" failed: Can't modify data under /.info/"))};function F(a,b,c,d,e,f,h){this.n=a;this.path=b;this.ha=c;this.ka=Da.test(d)?Number(d):d;this.ya=e;this.qa=Da.test(f)?Number(f):f;this.pa=h;s(this.ka)&&(s(this.qa)&&s(this.ha))&&g("fb.api.Query: Can't combine startAt(), endAt(), and limit().")}F.prototype.Jb=function(a,b){z("fb.api.Query.on",2,2,arguments.length);Aa("fb.api.Query.on",a,m);B("fb.api.Query.on",2,b,m);this.n.bb(this,a,b);return b};F.prototype.on=F.prototype.Jb;
F.prototype.Ib=function(a,b){z("fb.api.Query.off",0,2,arguments.length);Aa("fb.api.Query.off",a,k);B("fb.api.Query.off",2,b,k);this.n.rb(this,a,b)};F.prototype.off=F.prototype.Ib;F.prototype.Mc=function(a,b){function c(f){e&&(e=m,d.Ib(a,c),b(f))}z("fb.api.Query.once",2,2,arguments.length);Aa("fb.api.Query.once",a,m);B("fb.api.Query.once",2,b,m);var d=this,e=k;this.Jb(a,c)};F.prototype.once=F.prototype.Mc;
F.prototype.vc=function(a){z("fb.api.Query.limit",1,1,arguments.length);(!fa(a)||Math.floor(a)!==a||0>=a)&&g("fb.api.Query.limit: First argument must be a positive integer.");return new F(this.n,this.path,a,this.ka,this.ya,this.qa,this.pa)};F.prototype.limit=F.prototype.vc;F.prototype.Tc=function(a,b){z("fb.api.Query.startAt",0,2,arguments.length);za("fb.api.Query.startAt",1,a,k);Ba("fb.api.Query.startAt",b);s(a)||(b=a=l);return new F(this.n,this.path,this.ha,a,b,this.qa,this.pa)};
F.prototype.startAt=F.prototype.Tc;F.prototype.rc=function(a,b){z("fb.api.Query.endAt",0,2,arguments.length);za("fb.api.Query.endAt",1,a,k);Ba("fb.api.Query.endAt",b);return new F(this.n,this.path,this.ha,this.ka,this.ya,a,b)};F.prototype.endAt=F.prototype.rc;function Ea(a){var b={};s(a.ka)&&(b.sp=a.ka);s(a.ya)&&(b.sn=a.ya);s(a.qa)&&(b.ep=a.qa);s(a.pa)&&(b.en=a.pa);s(a.ha)&&(b.l=a.ha);return b}F.prototype.sa=function(){var a=Fa(Ea(this));return"{}"===a?"default":a};function G(a){if(a instanceof G)return a;if(1==arguments.length){this.k=a.split("/");for(var b=0,c=0;c<this.k.length;c++)0<this.k[c].length&&(this.k[b]=this.k[c],b++);this.k.length=b;this.O=0}else this.k=arguments[0],this.O=arguments[1]}function E(a){return a.O>=a.k.length?l:a.k[a.O]}function H(a){var b=a.O;b<a.k.length&&b++;return new G(a.k,b)}G.prototype.toString=function(){for(var a="",b=this.O;b<this.k.length;b++)""!==this.k[b]&&(a+="/"+this.k[b]);return a};
G.prototype.parent=function(){if(this.O>=this.k.length)return l;for(var a=[],b=this.O;b<this.k.length-1;b++)a.push(this.k[b]);return new G(a,0)};G.prototype.B=function(a){for(var b=[],c=this.O;c<this.k.length;c++)b.push(this.k[c]);if(a instanceof G)for(c=a.O;c<a.k.length;c++)b.push(a.k[c]);else{a=a.split("/");for(c=0;c<a.length;c++)0<a[c].length&&b.push(a[c])}return new G(b,0)};G.prototype.e=function(){return this.O>=this.k.length};
function Ga(a,b){var c=E(a);if(c===l)return b;if(c===E(b))return Ga(H(a),H(b));g("INTERNAL ERROR: innerPath ("+b+") is not within outerPath ("+a+")")};function Ha(){this.children={};this.Db=0;this.value=l}function Ia(a,b,c){this.gb=a?a:"";this.Va=b?b:l;this.m=c?c:new Ha}function I(a,b){for(var c=b instanceof G?b:new G(b),d=a,e;(e=E(c))!==l;)d=new Ia(e,d,e in d.m.children?d.m.children[e]:new Ha),c=H(c);return d}r=Ia.prototype;r.j=function(){return this.m.value};function J(a,b){K("undefined"!==typeof b);a.m.value=b;Ja(a)}r.fb=function(){return 0<this.m.Db};r.e=function(){return this.j()===l&&!this.fb()};
r.A=function(a){for(var b in this.m.children)a(new Ia(b,this,this.m.children[b]))};function Ka(a,b,c,d){c&&!d&&b(a);a.A(function(a){Ka(a,b,k,d)});c&&d&&b(a)}function La(a,b){for(var c=a.parent();c!==l;){if(b(c))return k;c=c.parent()}return m}r.path=function(){return new G(this.Va===l?this.gb:this.Va.path()+"/"+this.gb)};r.name=aa("gb");r.parent=aa("Va");
function Ja(a){if(a.Va!==l){var b=a.Va,c=a.gb,d=a.e(),e=c in b.m.children;d&&e?(delete b.m.children[c],b.m.Db--,Ja(b)):!d&&!e&&(b.m.children[c]=a.m,b.m.Db++,Ja(b))}};function L(a,b){this.Ba=a?a:Ma;this.T=b?b:Na}function Ma(a,b){return a<b?-1:a>b?1:0}r=L.prototype;r.Y=function(a,b){return new L(this.Ba,this.T.Y(a,b,this.Ba).copy(l,l,m,l,l))};r.remove=function(a){return new L(this.Ba,this.T.remove(a,this.Ba).copy(l,l,m,l,l))};r.get=function(a){for(var b,c=this.T;!c.e();){b=this.Ba(a,c.key);if(0===b)return c.value;0>b?c=c.left:0<b&&(c=c.right)}return l};
function Oa(a,b){for(var c,d=a.T,e=l;!d.e();){c=a.Ba(b,d.key);if(0===c){if(d.left.e())return e?e.key:l;for(d=d.left;!d.right.e();)d=d.right;return d.key}0>c?d=d.left:0<c&&(e=d,d=d.right)}g("Attempted to find predecessor key for a nonexistent key.  What gives?")}r.e=function(){return this.T.e()};r.count=function(){return this.T.count()};r.Ra=function(){return this.T.Ra()};r.Fa=function(){return this.T.Fa()};r.ga=function(a){return this.T.ga(a)};r.ua=function(a){return this.T.ua(a)};
r.Da=function(a){return new Pa(this.T,a)};function Pa(a,b){this.fc=b;for(this.hb=[];!a.e();)this.hb.push(a),a=a.left}function Qa(a){if(0===a.hb.length)return l;var b=a.hb.pop(),c;c=a.fc?a.fc(b.key,b.value):{key:b.key,value:b.value};for(b=b.right;!b.e();)a.hb.push(b),b=b.left;return c}function Ra(a,b,c,d,e){this.key=a;this.value=b;this.color=c!=l?c:k;this.left=d!=l?d:Na;this.right=e!=l?e:Na}r=Ra.prototype;
r.copy=function(a,b,c,d,e){return new Ra(a!=l?a:this.key,b!=l?b:this.value,c!=l?c:this.color,d!=l?d:this.left,e!=l?e:this.right)};r.count=function(){return this.left.count()+1+this.right.count()};r.e=p(m);r.ga=function(a){return this.left.ga(a)||a(this.key,this.value)||this.right.ga(a)};r.ua=function(a){return this.right.ua(a)||a(this.key,this.value)||this.left.ua(a)};function Sa(a){return a.left.e()?a:Sa(a.left)}r.Ra=function(){return Sa(this).key};
r.Fa=function(){return this.right.e()?this.key:this.right.Fa()};r.Y=function(a,b,c){var d,e;e=this;d=c(a,e.key);e=0>d?e.copy(l,l,l,e.left.Y(a,b,c),l):0===d?e.copy(l,b,l,l,l):e.copy(l,l,l,l,e.right.Y(a,b,c));return Ta(e)};function Ua(a){if(a.left.e())return Na;!a.left.z()&&!a.left.left.z()&&(a=Va(a));a=a.copy(l,l,l,Ua(a.left),l);return Ta(a)}
r.remove=function(a,b){var c,d;c=this;if(0>b(a,c.key))!c.left.e()&&(!c.left.z()&&!c.left.left.z())&&(c=Va(c)),c=c.copy(l,l,l,c.left.remove(a,b),l);else{c.left.z()&&(c=Wa(c));!c.right.e()&&(!c.right.z()&&!c.right.left.z())&&(c=Xa(c),c.left.left.z()&&(c=Wa(c),c=Xa(c)));if(0===b(a,c.key)){if(c.right.e())return Na;d=Sa(c.right);c=c.copy(d.key,d.value,l,l,Ua(c.right))}c=c.copy(l,l,l,l,c.right.remove(a,b))}return Ta(c)};r.z=aa("color");
function Ta(a){a.right.z()&&!a.left.z()&&(a=Ya(a));a.left.z()&&a.left.left.z()&&(a=Wa(a));a.left.z()&&a.right.z()&&(a=Xa(a));return a}function Va(a){a=Xa(a);a.right.left.z()&&(a=a.copy(l,l,l,l,Wa(a.right)),a=Ya(a),a=Xa(a));return a}function Ya(a){var b;b=a.copy(l,l,k,l,a.right.left);return a.right.copy(l,l,a.color,b,l)}function Wa(a){var b;b=a.copy(l,l,k,a.left.right,l);return a.left.copy(l,l,a.color,l,b)}
function Xa(a){var b,c;b=a.left.copy(l,l,!a.left.color,l,l);c=a.right.copy(l,l,!a.right.color,l,l);return a.copy(l,l,!a.color,b,c)}function Za(){}r=Za.prototype;r.copy=function(){return this};r.Y=function(a,b){return new Ra(a,b,i,i,i)};r.remove=function(){return this};r.get=p(l);r.count=p(0);r.e=p(k);r.ga=p(m);r.ua=p(m);r.Ra=p(l);r.Fa=p(l);r.z=p(m);var Na=new Za;function $a(){};function ab(){this.o=[];this.Cb=[];this.oc=[];this.lb=[];this.lb[0]=128;for(var a=1;64>a;++a)this.lb[a]=0;this.reset()}ja(ab,$a);ab.prototype.reset=function(){this.o[0]=1732584193;this.o[1]=4023233417;this.o[2]=2562383102;this.o[3]=271733878;this.o[4]=3285377520;this.Pb=this.Ma=0};
function bb(a,b){var c;c||(c=0);for(var d=a.oc,e=c;e<c+64;e+=4)d[e/4]=b[e]<<24|b[e+1]<<16|b[e+2]<<8|b[e+3];for(e=16;80>e;e++){var f=d[e-3]^d[e-8]^d[e-14]^d[e-16];d[e]=(f<<1|f>>>31)&4294967295}c=a.o[0];for(var h=a.o[1],j=a.o[2],n=a.o[3],o=a.o[4],t,e=0;80>e;e++)40>e?20>e?(f=n^h&(j^n),t=1518500249):(f=h^j^n,t=1859775393):60>e?(f=h&j|n&(h|j),t=2400959708):(f=h^j^n,t=3395469782),f=(c<<5|c>>>27)+f+o+t+d[e]&4294967295,o=n,n=j,j=(h<<30|h>>>2)&4294967295,h=c,c=f;a.o[0]=a.o[0]+c&4294967295;a.o[1]=a.o[1]+h&
4294967295;a.o[2]=a.o[2]+j&4294967295;a.o[3]=a.o[3]+n&4294967295;a.o[4]=a.o[4]+o&4294967295}ab.prototype.update=function(a,b){s(b)||(b=a.length);var c=this.Cb,d=this.Ma,e=0;if(u(a))for(;e<b;)c[d++]=a.charCodeAt(e++),64==d&&(bb(this,c),d=0);else for(;e<b;)c[d++]=a[e++],64==d&&(bb(this,c),d=0);this.Ma=d;this.Pb+=b};function cb(a,b,c,d){this.host=a;this.tb=b;this.Ha=c;this.Hb=d||this.host};var db,eb,fb,gb;function hb(){return ba.navigator?ba.navigator.userAgent:l}gb=fb=eb=db=m;var ib;if(ib=hb()){var jb=ba.navigator;db=0==ib.indexOf("Opera");eb=!db&&-1!=ib.indexOf("MSIE");fb=!db&&-1!=ib.indexOf("WebKit");gb=!db&&!fb&&"Gecko"==jb.product}var kb=eb,lb=gb,mb=fb;var nb;if(db&&ba.opera){var ob=ba.opera.version;"function"==typeof ob&&ob()}else lb?nb=/rv\:([^\);]+)(\)|;)/:kb?nb=/MSIE\s+([^\);]+)(\)|;)/:mb&&(nb=/WebKit\/(\S+)/),nb&&nb.exec(hb());var pb=l,qb=l;
function rb(a,b){ea(a)||g(Error("encodeByteArray takes an array as a parameter"));if(!pb){pb={};qb={};for(var c=0;65>c;c++)pb[c]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c),qb[c]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(c)}for(var c=b?qb:pb,d=[],e=0;e<a.length;e+=3){var f=a[e],h=e+1<a.length,j=h?a[e+1]:0,n=e+2<a.length,o=n?a[e+2]:0,t=f>>2,f=(f&3)<<4|j>>4,j=(j&15)<<2|o>>6,o=o&63;n||(o=64,h||(j=64));d.push(c[t],c[f],c[j],c[o])}return d.join("")}
;var ub,vb=1;ub=function(){return vb++};function K(a,b){a||g(Error("Firebase INTERNAL ASSERT FAILED:"+b))}function wb(a){var b=qa(a),a=new ab;a.update(b);var b=[],c=8*a.Pb;56>a.Ma?a.update(a.lb,56-a.Ma):a.update(a.lb,64-(a.Ma-56));for(var d=63;56<=d;d--)a.Cb[d]=c&255,c/=256;bb(a,a.Cb);for(d=c=0;5>d;d++)for(var e=24;0<=e;e-=8)b[c++]=a.o[d]>>e&255;return rb(b)}
function xb(){for(var a="",b=0;b<arguments.length;b++)a=ea(arguments[b])?a+xb.apply(l,arguments[b]):"object"===typeof arguments[b]?a+y(arguments[b]):a+arguments[b],a+=" ";return a}var yb=l;function M(){if(yb){var a=xb.apply(l,arguments);yb(a)}}function zb(){if("undefined"!==typeof console){var a=xb.apply(l,arguments);console.log("FIREBASE INTERNAL ERROR: "+a)}}var Da=/^[\-+]?[0-9]*\.?[0-9]+$/;function Ab(a,b){return a!==b?a===l?-1:b===l?1:typeof a!==typeof b?"number"===typeof a?-1:1:a>b?1:-1:0}
var Bb=0;function Fa(a){if("object"!==typeof a||a===l)return y(a);var b=[],c;for(c in a)b.push(c);b.sort();c="{";for(var d=0;d<b.length;d++)0!==d&&(c+=","),c+=y(b[d]),c+=":",c+=Fa(a[b[d]]);return c+"}"};function Cb(a,b){this.la=a;K(this.la!==l,"LeafNode shouldn't be created with null value.");this.Ia="undefined"!==typeof b?b:l}r=Cb.prototype;r.Z=p(k);r.i=aa("Ia");r.Ab=function(a){return new Cb(this.la,a)};r.G=function(){return O};r.F=function(a){return E(a)===l?this:O};r.R=p(l);r.w=function(a,b){return(new P(new L,this.Ia)).w(a,b)};r.$a=function(a,b){var c=E(a);return c===l?b:this.w(c,O.$a(H(a),b))};r.e=p(m);r.ib=p(0);
r.U=function(a){return a&&this.i()!==l?{".value":this.j(),".priority":""+this.i()}:this.j()};r.hash=function(){var a="";this.i()!==l&&(a+="priority:"+this.i()+":");a+=typeof this.la+":"+this.la;return wb(a)};r.j=aa("la");r.toString=function(){return"string"===typeof this.la?'"'+this.la+'"':this.la};function P(a,b){this.K=a||new L;this.Ia="undefined"!==typeof b?b:l}r=P.prototype;r.Z=p(m);r.i=aa("Ia");r.Ab=function(a){return new P(this.K,a)};r.w=function(a,b){var c=this.K.remove(a);b&&b.e()&&(b=l);b!==l&&(c=c.Y(a,b));return b&&b.i()!==l?new Db(c,l,this.Ia):new P(c,this.Ia)};r.$a=function(a,b){var c=E(a);if(c===l)return b;var d=this.G(c).$a(H(a),b);return this.w(c,d)};r.e=function(){return this.K.e()};r.ib=function(){return this.K.count()};var Eb=/^\d+$/;r=P.prototype;
r.U=function(a){if(this.e())return l;var b={},c=0,d=0,e=k;this.A(function(f,h){b[f]=h.U(a);c++;e&&Eb.test(f)?d=Math.max(d,Number(f)):e=m});if(!a&&e&&d<2*c){var f=[],h;for(h in b)f[h]=b[h];return f}a&&this.i()!==l&&(b[".priority"]=""+this.i());return b};r.hash=function(){var a="";this.i()!==l&&(a+="priority:"+this.i()+":");this.A(function(b,c){var d=c.hash();""!==d&&(a+=":"+b+":"+d)});return""===a?"":wb(a)};r.G=function(a){a=this.K.get(a);return a===l?O:a};
r.F=function(a){var b=E(a);return b===l?this:this.G(b).F(H(a))};r.R=function(a){return Oa(this.K,a)};r.Wb=function(){return this.K.Ra()};r.Yb=function(){return this.K.Fa()};r.A=function(a){return this.K.ga(a)};r.Fb=function(a){return this.K.ua(a)};r.Da=function(){return this.K.Da()};r.toString=function(){var a="{",b=k;this.A(function(c,d){b?b=m:a+=", ";a+='"'+c+'" : '+d.toString()});return a+="}"};var O=new P(new L);function Db(a,b,c){P.call(this,a,c);b===l&&(b=new L(Fb),a.ga(function(a,c){b=b.Y({name:a,ia:c.i()},c)}));this.xa=b}ja(Db,P);r=Db.prototype;r.w=function(a,b){var c=this.G(a),d=this.K,e=this.xa;c!==l&&(d=d.remove(a),e=e.remove({name:a,ia:c.i()}));b&&b.e()&&(b=l);b!==l&&(d=d.Y(a,b),e=e.Y({name:a,ia:b.i()},b));return new Db(d,e,this.i())};r.R=function(a,b){var c=Oa(this.xa,{name:a,ia:b.i()});return c?c.name:l};r.A=function(a){return this.xa.ga(function(b,c){return a(b.name,c)})};
r.Fb=function(a){return this.xa.ua(function(b,c){return a(b.name,c)})};r.Da=function(){return this.xa.Da(function(a,b){return{key:a.name,value:b}})};r.Wb=function(){return this.xa.Ra().name};r.Yb=function(){return this.xa.Fa().name};function Q(a,b){if("object"!==typeof a)return new Cb(a,b);if(a===l)return O;var c=l;".priority"in a?c=a[".priority"]:"undefined"!==typeof b&&(c=b);c!==l&&(c=Da.test(c)?Number(c):c);if(".value"in a&&a[".value"]!==l)return new Cb(a[".value"],c);var c=new P(new L,c),d;for(d in a)if(a.hasOwnProperty(d)&&"."!==d.substring(0,1)){var e=Q(a[d]);if(e.Z()||!e.e())c=c.w(d,e)}return c}function Fb(a,b){return Ab(a.ia,b.ia)||(a.name!==b.name?a.name<b.name?-1:1:0)};function R(a,b){this.m=a;this.qb=b}R.prototype.U=function(){z("Firebase.DataSnapshot.val",0,0,arguments.length);return this.m.U()};R.prototype.val=R.prototype.U;R.prototype.sc=function(){z("Firebase.DataSnapshot.exportVal",0,0,arguments.length);return this.m.U(k)};R.prototype.exportVal=R.prototype.sc;R.prototype.B=function(a){z("Firebase.DataSnapshot.child",0,1,arguments.length);fa(a)&&(a=String(a));Ca("Firebase.DataSnapshot.child",a);var b=new G(a),c=this.qb.B(b);return new R(this.m.F(b),c)};
R.prototype.child=R.prototype.B;R.prototype.tc=function(a){z("Firebase.DataSnapshot.hasChild",1,1,arguments.length);Ca("Firebase.DataSnapshot.hasChild",a);var b=new G(a);return!this.m.F(b).e()};R.prototype.hasChild=R.prototype.tc;R.prototype.i=function(){z("Firebase.DataSnapshot.getPriority",0,0,arguments.length);var a=this.m.i();return a===l?a:""+a};R.prototype.getPriority=R.prototype.i;
R.prototype.forEach=function(a){z("Firebase.DataSnapshot.forEach",1,1,arguments.length);B("Firebase.DataSnapshot.forEach",1,a,m);if(this.m.Z())return m;var b=this;return this.m.A(function(c,d){return a(new R(d,b.qb.B(c)))})};R.prototype.forEach=R.prototype.forEach;R.prototype.fb=function(){z("Firebase.DataSnapshot.hasChildren",0,0,arguments.length);return this.m.Z()?m:!this.m.e()};R.prototype.hasChildren=R.prototype.fb;
R.prototype.name=function(){z("Firebase.DataSnapshot.name",0,0,arguments.length);return this.qb.name()};R.prototype.name=R.prototype.name;R.prototype.ib=function(){z("Firebase.DataSnapshot.numChildren",0,0,arguments.length);return this.m.ib()};R.prototype.numChildren=R.prototype.ib;R.prototype.Nc=function(){z("Firebase.DataSnapshot.ref",0,0,arguments.length);return this.qb};R.prototype.ref=R.prototype.Nc;var Gb=l;"undefined"!==typeof MozWebSocket?Gb=MozWebSocket:"undefined"!==typeof WebSocket&&(Gb=WebSocket);
function Hb(a,b,c,d){this.N=d;this.jb=b;this.Jc=c;this.Pa=l;this.state=0;this.frames=l;this.lc=0;a=(a.tb?"wss://":"ws://")+a.Hb+"/"+a.Ha+".ws?v=3";M("Connecting to "+a);this.L=new Gb(a);var e=this;this.L.onopen=function(){M("Websocket connected.  Sending hello.");e.state=1;e.Jc()};this.L.onclose=function(){M("Websocket connection was disconnected.");e.L=l;e.close(k)};this.L.onmessage=function(a){e.L!==l&&(a=a.data,1===e.state?(e.lc=Number(a),e.state=2,e.frames=[]):2===e.state?(e.frames.push(a),e.frames.length==
e.lc&&(a="undefined"!==typeof JSON&&s(JSON.parse)?JSON.parse(e.frames.join("")):ka(e.frames.join("")),e.state=1,Ib(e),e.jb(a))):zb("Websocket got a frame in an unknown state: "+e.state))};this.L.onerror=function(){M("WebSocket error.  Closing connection.");e.close()}}Hb.prototype.send=function(a){Ib(this);a=y(a);a=Jb(a,16384);this.L.send(String(a.length));for(var b=0;b<a.length;b++)this.L.send(a[b])};
Hb.prototype.close=function(a){if(!this.Oa&&(this.Oa=k,a||M("Closing WebSocket."),this.Pa&&(clearTimeout(this.Pa),this.Pa=l),this.L&&(this.L.close(),this.L=l),this.N))this.N(),this.N=l};function Ib(a){clearTimeout(a.Pa);a.Pa=setInterval(function(){a.L.send("0");Ib(a)},45E3)};function Kb(){this.set={}}r=Kb.prototype;r.add=function(a,b){this.set[a]=b!==l?b:k};r.get=function(a){return this.set[a]};r.remove=function(a){delete this.set[a]};r.e=function(){for(var a in this.set)return m;return k};r.count=function(){var a=0,b;for(b in this.set)a++;return a};var Lb="pLPCommand",Mb="pRTLPCB";
function Nb(a,b,c,d){function e(){if(!f.Oa){f.va=new Ob(function(a,d,e){if(f.va)if(f.oa&&(clearTimeout(f.oa),f.oa=l),"start"==a){c();a=f.va;a.yc=d;a.zc=e;for(a.Bb=k;Pb(a););f.Ga=document.createElement("iframe");f.Ga.src=f.Sa()+"?disconn=t&id="+d+"&pw="+e;f.Ga.style.display="none";document.body.appendChild(f.Ga)}else b(a)},function(a,b){var c=f.Ac;for(c.mb[a]=b;c.mb[c.eb];){var d=c.mb[c.eb];delete c.mb[c.eb];for(var e=0;e<d.length;e++)d[e]&&c.xc(d[e]);c.eb++}},function(){f.close()},f.Sa);var a=f.Sa()+
"?start=t&ser="+Math.floor(1E8*Math.random())+"&v=3";M("Connecting via long-poll to "+a);Qb(f.va,a,function(){})}}this.Xc=a;this.Sa=function(){return(a.tb?"https://":"http://")+a.Hb+"/"+a.Ha+".lp"};this.Qb=0;this.N=d;this.Ac=new Rb(b);this.Oa=m;var f=this;this.oa=setTimeout(function(){M("Timed out trying to connect.");f.close();f.oa=l},3E4);if("complete"===document.readyState)e();else{var h=m,j=function(){document.body?h||(h=k,e()):setTimeout(j,10)};document.addEventListener?(document.addEventListener("DOMContentLoaded",
j,m),window.addEventListener("load",j,m)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&j()},m),window.attachEvent("onload",j,m))}}Nb.prototype.close=function(){if(!this.Oa&&(this.Oa=k,M("Closing long-poll connection."),this.va&&(this.va.close(),this.va=l),this.Ga&&(document.body.removeChild(this.Ga),this.Ga=l),this.N&&(this.N(),this.N=l),this.oa))clearTimeout(this.oa),this.oa=l};
Nb.prototype.send=function(a){for(var a=y(a),a=rb(qa(a),k),a=Jb(a,1840),b=0;b<a.length;b++){var c=this.va;c.Xa.push({Sc:this.Qb,Uc:a.length,Rb:a[b]});c.Bb&&Pb(c);this.Qb++}};function Rb(a){this.xc=a;this.mb=[];this.eb=0}
function Ob(a,b,c,d){this.Sa=d;this.N=c;this.Mb=new Kb;this.Xa=[];this.Eb=Math.floor(1E8*Math.random());c=ub();window[Lb+c]=a;window[Mb+c]=b;a=document.createElement("iframe");a.style.display="none";document.body?document.body.appendChild(a):g("Document body has not initialized. Wait to initialize Firebase until after the document is ready.");a.contentDocument?a.fa=a.contentDocument:a.contentWindow?a.fa=a.contentWindow.document:a.document&&(a.fa=a.document);this.$=a;a="<html><body><script>\nfunction "+
Lb+'(c, a1, a2, a3, a4) {\nparent.window["'+Lb+c+'"](c, a1, a2, a3, a4);\n}\nfunction '+Mb+'(pN, data) {\nparent.window["'+Mb+c+'"](pN, data);\n}\n<\/script></body></html>\n';this.$.fa.open();this.$.fa.write(a);this.$.fa.close()}Ob.prototype.close=function(){this.Bb=m;this.$&&(this.$.fa.body.innerHTML="",document.body.removeChild(this.$),this.$=l);var a=this.N;a&&(this.N=l,a())};
function Pb(a){if(a.Bb&&a.Mb.count()<(0<a.Xa.length?2:1)){a.Eb++;for(var b=a.Sa()+"?id="+a.yc+"&pw="+a.zc+"&ser="+a.Eb,c="",d=0;0<a.Xa.length;)if(1870>=a.Xa[0].Rb.length+30+c.length){var e=a.Xa.shift(),c=c+"&seg"+d+"="+e.Sc+"&ts"+d+"="+e.Uc+"&d"+d+"="+e.Rb;d++}else break;var b=b+c,f=a.Eb;a.Mb.add(f);var h=function(){a.Mb.remove(f);Pb(a)},j=setTimeout(h,25E3);Qb(a,b,function(){clearTimeout(j);h()});return k}return m}
function Qb(a,b,c){setTimeout(function(){try{var d=a.$.fa.createElement("script");d.type="text/javascript";d.async=k;d.src=b;d.onload=d.onreadystatechange=function(){var a=d.readyState;if(!a||"loaded"===a||"complete"===a)d.onload=d.onreadystatechange=l,d.parentNode&&d.parentNode.removeChild(d),c()};d.onerror=function(){M("Long-poll script failed to load.");a.close()};a.$.fa.body.appendChild(d)}catch(e){}},1)}
function Jb(a,b){if(a.length<=b)return[a];for(var c=[],d=0;d<a.length;d+=b)d+b>a?c.push(a.substring(d,a.length)):c.push(a.substring(d,d+b));return c};function Sb(a,b,c,d){this.P=a;this.Ta=b;this.W=c;this.C=d;this.H=0;this.Qa=l;this.J=0;this.ab=l;if(Gb!==l){M("CHOOSER: Starting WebSocket connection.");K(Gb!==l,"WebSocket isn't supported.");K(0===this.J,"webSocketState should be START.");K(2!==this.H,"longPollState should not be CONNECTED");this.J=1;try{this.ab=new Hb(this.P,this.Ta,w(this.Kc,this),w(this.Lc,this))}catch(e){zb("WebSocket constructor threw exception: "+e.toString()),Tb(this)}}else Tb(this);if(3!==this.J){M("CHOOSER: Trying long-poll connection in 450ms.");
var f=this;setTimeout(function(){Ub(f)},450)}else Ub(this)}r=Sb.prototype;r.Kc=function(){M("CHOOSER: WebSocket connection connected.");1===this.J||zb("webSocketState should be CONNECTING.");2===this.H?Tb(this):(this.J=2,Vb(this),this.W&&(this.W(this.ab),this.W=l))};r.Lc=function(){M("CHOOSER: WebSocket connection disconnected.");K(0!==this.J,"webSocketState should not be START.");K(3===this.H||2!==this.J,"Was CONNECTED via websocket, but long-polling wasn't canceled.");Tb(this)};
function Ub(a){0===a.H&&(M("CHOOSER: Starting Long-polling connection."),K(k,"Long-polling isn't supported."),K(2!==a.J,"webSocketState should not be CONNECTED."),a.H=1,a.Qa=new Nb(a.P,a.Ta,w(a.Gc,a),w(a.Hc,a)))}r.Gc=function(){M("CHOOSER: Long-polling connection connected.");1===this.H||zb("longPollState should be CONNECTING.");2===this.J?Vb(this):(this.H=2,Tb(this),this.W&&(this.W(this.Qa),this.W=l))};
r.Hc=function(){M("CHOOSER: Long-polling connection disconnected.");K(0!==this.H,"longPollState should not be START.");K(3===this.J||2!==this.H,"Was CONNECTED via long-polling, but websocket wasn't canceled.");Vb(this)};function Vb(a){3!==a.H&&(M("CHOOSER: Canceling long-polling connection."),a.H=3,a.Qa&&(a.Qa.close(),a.Qa=l),Wb(a))}function Tb(a){3!==a.J&&(M("CHOOSER: Canceling websocket connection."),a.J=3,a.ab&&(a.ab.close(),a.ab=l),0===a.H&&Ub(a),Wb(a))}
function Wb(a){3===a.J&&(3===a.H&&a.C)&&(M("CHOOSER: Both websocket and long-polling were canceled.  Connection lost."),a.C(),a.C=l)}r.close=function(){Vb(this);Tb(this);this.C&&(this.C(),this.C=l)};function S(a,b,c,d,e){this.Ta=b;this.W=c;this.C=d;this.Lb=e;this.P=a;this.ja={};this.Rc=0;this.nb=[];this.za=0;b=w(this.Ic,this);c=w(this.Cc,this);d=w(this.Dc,this);this.Ca=new Sb(a,b,c,d)}r=S.prototype;r.wa=function(a,b,c,d){var e=++this.Rc;Xb(this,{r:e,a:a,b:b});var f=this,a=setTimeout(function(){var a=f.ja[e];a&&(delete f.ja[e],a.X&&a.X.kb&&a.X.kb())},45E3);this.ja[e]={X:{jb:c,kb:d},jc:a}};
r.Ic=function(a){if("r"in a){var b=a.r,c=this.ja[b];c&&(delete this.ja[b],clearTimeout(c.jc),c.X&&c.X.jb&&c.X.jb(a.b))}else"error"in a&&g("A server-side error has occurred: "+a.error),"c"in a?(b=a.c,a=a.b,"s"===b?(M("Connection shutdown command received. Shutting down..."),this.Lb&&(this.Lb(a),this.Lb=l),this.C=l,this.close(m)):"r"===b?(this.P.Hb=a,this.close(k)):zb("Unknown control packet command: "+b)):"a"in a?this.Ta&&this.Ta(a.a,a.b):g("Unrecognized server packet received: "+y(a))};
r.Cc=function(a){M("Realtime connection established.");this.Ca=a;this.za=1;for(a=0;a<this.nb.length;a++)Xb(this,this.nb[a]);this.nb=l;this.W&&(this.W(),this.W=l)};r.Dc=function(){this.Ca=l;0===this.za?M("Realtime connection failed."):1===this.za&&M("Realtime connection lost.");this.close(m)};function Xb(a,b){2===a.za&&g("Connection has already been closed.");0===a.za?a.nb.push(b):a.Ca.send(b)}
r.close=function(a){if(2!==this.za){M("Closing realtime connection.");this.za=2;this.Ca&&(this.Ca.close(),this.Ca=l);this.C&&(this.C(a),this.C=l);for(var b in this.ja)a=this.ja[b],delete this.ja[b],a!==l&&(a.X&&a.X.kb&&a.X.kb(),clearTimeout(a.jc))}};function Yb(a,b,c,d){this.id=Zb++;this.xb=k;this.V={};this.I=[];this.Ua=0;this.Kb={};this.ea=m;this.pb=1E3;this.bc=c;this.C=d;this.P=a;$b(this,b)}var Zb=0;function ac(a,b,c){var d=Fa(c);a.u("Listen on "+b+" for "+d);b={p:b};"default"!==d&&(b.q=c);a.aa.wa("l",b,l,function(){a.u("timed out on listen...")})}r=Yb.prototype;r.Aa=function(a,b){this.cb={qc:a,Ub:m,ca:b};this.u("Authenticating using credential: "+this.cb);bc(this)};
r.Ka=function(){delete this.cb;this.ea&&this.aa.wa("unauth",{},function(){},function(){})};function bc(a){var b=a.cb;a.ea&&b&&a.aa.wa("auth",{cred:b.qc},function(c){(c="ok"==c.s)||delete a.cb;b.Ub||(b.Ub=k,b.ca&&b.ca(c))},function(){a.u("timed out on auth...")})}
r.Wc=function(a,b){var c=Fa(b);K(this.V[a][c],"unlisten() called for path/queryId we're not listening on.");delete this.V[a][c];if(this.ea){c=Fa(b);this.u("Unlisten on "+a+" for "+c);var d=this,e={p:a};"default"!==c&&(e.q=b);this.aa.wa("u",e,l,function(){d.u("timed out on unlisten...")})}};r.N=function(a,b){this.Kb[a]=b;this.ea&&cc(this,a,b)};
function cc(a,b,c){b={p:b,d:c};a.u("onDisconnect",b);a.aa.wa("o",b,function(a){"ok"!==a.s&&g("onDisconnect failed: "+y(a.d))},function(){a.u("timed out on onDisconnect...")})}r.put=function(a,b,c,d){dc(this,"p",a,b,c,d)};function dc(a,b,c,d,e,f){c={p:c,d:d};s(f)&&(c.h=f);a.I.push({action:b,ec:c,M:e});a.Ua++;b=a.I.length-1;a.ea&&ec(a,b)}
function ec(a,b){var c=a.I[b].action,d=a.I[b].ec,e=a.I[b].M;a.u(c,d);a.aa.wa(c,d,function(d){a.u(c+" response",d);delete a.I[b];a.Ua--;0===a.Ua&&(a.I=[]);e&&e(d.s)},function(){a.u("timed out on put...")})}
function $b(a,b){var c=(new Date).getTime(),d=l;a.aa=new S(a.P,function(c,d){a.u("handleServerMessage",c,d);"d"===c?b(d.p,d.d):"m"===c?b(d.p,d.d,k):"t"===c?Bb=d-(new Date).getTime():zb("Unrecognized action received from server: "+y(c)+"\nAre you using the latest client?")},function(){a.ea=k;d=(new Date).getTime();bc(a);for(var b in a.V)for(var c in a.V[b])ac(a,b,a.V[b][c]);for(b in a.Kb)cc(a,b,a.Kb[b]);for(b=0;b<a.I.length;b++)a.I[b]&&ec(a,b);a.bc&&a.bc()},function(e){a.ea=m;if(!e||!a.xb){for(e=0;e<
a.I.length;e++){var f=a.I[e];f&&"h"in f.ec&&(f.M&&f.M("disconnect"),delete a.I[e],a.Ua--)}0===a.Ua&&(a.I=[])}a.xb?(d&&(3E4<(new Date).getTime()-d&&(a.pb=1E3),d=l),e=Math.max(0,a.pb-((new Date).getTime()-c)),e*=Math.random(),setTimeout(function(){$b(a,b)},e),a.pb=Math.min(3E4,1.3*a.pb)):a.gc=function(){$b(a,b)};a.C&&a.C()},function(a){g(Error(a))})}r.Na=function(){this.xb=m;this.aa&&this.aa.close()};r.Za=function(){this.xb=k;this.gc();this.gc=i};r.u=function(){M(this.id+":",arguments)};function fc(){this.Ja=O}function T(a,b){return a.Ja.F(b)}function U(a,b,c){a.Ja=a.Ja.$a(b,c)};function gc(){this.ub=new fc;this.S=new fc;this.na=new fc;this.Wa=new Ia}function hc(a,b,c){if(c.e())return a;if(c.j()!==l)return b;a=a||O;c.A(function(d){var d=d.name(),e=a.G(d),f=b.G(d),h=I(c,d),e=hc(e,f,h);a=a.w(d,e)});return a}gc.prototype.set=function(a,b){var c=ub();J(I(this.Wa,a),c);U(this.S,a,b);return c};function ic(a,b,c){a=I(a.Wa,b);b=a.j();K(b!==l,"pendingPut should not be null.");b===c&&J(a,l)};function jc(){this.ra=[]}function kc(a,b){if(0!==b.length){a.ra.push.apply(a.ra,b);for(var c=0;c<a.ra.length;c++)if(a.ra[c]){var d=a.ra[c];a.ra[c]=l;var e=d.ca;e(d.ic,d.Ya)}a.ra=[]}};function V(a,b,c,d){this.type=a;this.ba=b;this.Q=c;this.Ya=d};function lc(a){this.v=a;this.da=[];this.Tb=new jc}function mc(a,b,c){for(var d=m,e=a.da.length-1;0<=e;e--){var f=a.da[e];if(!b||f.type===b&&(!c||f.ca===c))if(a.da.splice(e,1),d=k,b&&c)break}return d}lc.prototype.ob=function(a,b){b=this.Nb(a,b);nc(this,b)};
function nc(a,b){for(var c=[],d=0;d<b.length;d++){var e=b[d],f=e.type,h=new W(a.v.n,a.v.path);b[d].Q&&(h=h.B(b[d].Q));h=new R(b[d].ba,h);"value"===e.type&&!h.fb()?f+="("+h.U()+")":"value"!==e.type&&(f+=" "+h.name());M(a.v.n.t.id+": event:"+a.v.path+":"+a.v.sa()+":"+f);for(f=0;f<a.da.length;f++){var j=a.da[f];b[d].type===j.type&&c.push({ca:j.ca,ic:h,Ya:e.Ya})}}kc(a.Tb,c)}function oc(a){var b=[];if(!a.Z()){var c=l;a.A(function(a,e){b.push(new V("child_added",e,a,c));c=a})}return b}
function rc(a){a.Ea||(a.Ea=k,nc(a,[new V("value",a.f)]))};function sc(a,b){lc.call(this,a);this.f=b}ja(sc,lc);sc.prototype.Nb=function(a,b){this.f=a;this.Ea&&b.push(new V("value",this.f));return b};function tc(a,b){this.Sb=a;this.cc=b}function uc(a,b,c,d){var e,f=[];c===d?e=m:c.Z()&&d.Z()?e=c.j()!==d.j():c.Z()?(vc(a,b,O,d,f),e=k):d.Z()?(vc(a,b,c,O,f),e=k):e=vc(a,b,c,d,f);(e=e||c.i()!==d.i())&&a.cc(b,d,f);return e}
function vc(a,b,c,d,e){var f=m,h=!I(a.Sb,b).e(),j=[],n=[],o=[],t={},N={},q,v,x,D;q=c.Da();x=Qa(q);v=d.Da();for(D=Qa(v);x!==l||D!==l;){c=x===l?1:D===l?-1:x.key===D.key?0:Fb({name:x.key,ia:x.value.i()},{name:D.key,ia:D.value.i()});if(0>c)f=t[x.key],s(f)?(o.push({Vb:x,kc:j[f]}),j[f]=l):(N[x.key]=n.length,n.push(x)),f=k,x=Qa(q);else{if(0<c)f=N[D.key],s(f)?(o.push({Vb:n[f],kc:D}),n[f]=l):(t[D.key]=j.length,j.push(D)),f=k;else{c=b.B(D.key);if(c=uc(a,c,x.value,D.value))x=d.R(D.key,D.value),e.push(new V("child_changed",
D.value,D.key,x)),f=k;x=Qa(q)}D=Qa(v)}if(!h&&f)return k}for(h=0;h<n.length;h++)if(t=n[h])c=b.B(t.key),uc(a,c,t.value,O),e.push(new V("child_removed",t.value,t.key));for(h=0;h<j.length;h++)if(n=j[h])c=b.B(n.key),x=d.R(n.key,n.value),uc(a,c,O,n.value),e.push(new V("child_added",n.value,n.key,x));for(h=0;h<o.length;h++)n=o[h].Vb,j=o[h].kc,c=b.B(j.key),x=d.R(j.key,j.value),e.push(new V("child_moved",j.value,j.key,x)),(c=uc(a,c,n.value,j.value))&&e.push(new V("child_changed",j.value,j.key,x));return f}
;function wc(a,b){lc.call(this,a);this.f=O;this.Nb(b,oc(b))}ja(wc,lc);
wc.prototype.Nb=function(a,b){var c=[],d=this.v;s(this.v.ya)&&c.push(function(a){return 0<=(a!==d.ya?a<d.ya?-1:1:0)});s(this.v.pa)&&c.push(function(a){return 0>=(a!==d.pa?a<d.pa?-1:1:0)});s(this.v.ka)&&c.push(function(a,b){return 0<=Ab(b,d.ka)});s(this.v.qa)&&c.push(function(a,b){return 0>=Ab(b,d.qa)});var e=l,f=l;if(s(this.v.ha))if(s(this.v.ka)){if(e=xc(a,c,this.v.ha,m)){var h=a.G(e).i();c.push(function(a,b){var c=Ab(b,h);return 0>c||0===c&&a<=e})}}else if(f=xc(a,c,this.v.ha,k)){var j=a.G(f).i();
c.push(function(a,b){var c=Ab(b,j);return 0<c||0===c&&a>=f})}for(var n=[],o=[],t=[],N=[],q=0;q<b.length;q++){var v=b[q].Q,x=b[q].ba;switch(b[q].type){case "child_added":yc(c,v,x)&&(this.f=this.f.w(v,x),o.push(b[q]));break;case "child_removed":this.f.G(v).e()||(this.f=this.f.w(v,l),n.push(b[q]));break;case "child_changed":!this.f.G(v).e()&&yc(c,v,x)&&(this.f=this.f.w(v,x),N.push(b[q]));break;case "child_moved":var D=!this.f.G(v).e(),pc=yc(c,v,x);D?pc?(this.f=this.f.w(v,x),t.push(b[q])):(n.push(new V("child_removed",
this.f.G(v),v)),this.f=this.f.w(v,l)):pc&&(this.f=this.f.w(v,x),o.push(b[q]))}}var qc=e||f;if(qc){var Uc=(q=f!==l)?this.f.Wb():this.f.Yb(),sb=m,tb=m,ta=this;(q?a.Fb:a.A).call(a,function(a,b){sb?(n.push(new V("child_removed",ta.f.G(a),a)),ta.f=ta.f.w(a,l)):tb&&(o.push(new V("child_added",b,a)),ta.f=ta.f.w(a,b));a===Uc&&(tb=k);a===qc&&(sb=k);if(tb&&sb)return k})}for(q=0;q<o.length;q++)c=o[q],v=this.f.R(c.Q,c.ba),n.push(new V("child_added",c.ba,c.Q,v));for(q=0;q<t.length;q++)c=t[q],v=this.f.R(c.Q,c.ba),
n.push(new V("child_moved",c.ba,c.Q,v));for(q=0;q<N.length;q++)c=N[q],v=this.f.R(c.Q,c.ba),n.push(new V("child_changed",c.ba,c.Q,v));this.Ea&&0<n.length&&n.push(new V("value",this.f));return n};function xc(a,b,c,d){var e=l;(d?a.Fb:a.A).call(a,function(a,d){if(yc(b,a,d)&&(e=a,c--,0===c))return k});return e}function yc(a,b,c){for(var d=0;d<a.length;d++)if(!a[d](b,c.i()))return m;return k};function zc(a,b){this.t=a;this.g=b;this.ac=b.Ja;this.La=new Ia}
zc.prototype.bb=function(a,b,c){var d=a.path,e=I(this.La,d),f=e.j();f===l&&(f={},J(e,f));var h=a.sa();if(!(h in f)){f=f||{};f[h]={};var j=f,n=m;La(e,function(a){a.j()&&(a.j()["default"]&&a.j()["default"].D)&&(n=k)});n||(j[h].D=Ac(this,a),"default"===h&&Ka(e,function(a){a=a.j();if(a!==l)for(var b in a)if(a[b].D){a[b].D();delete a[b].D}}))}e=f[h].view;e||(e=this.g.Ja.F(d),e="default"===a.sa()?new sc(a,e):new wc(a,e),f[h].view=e,(a=(a=La(I(this.La,d),function(a){if(a.j()&&a.j()["default"]&&a.j()["default"].view.Ea)return k}))||
this.t===l)&&rc(e));a=e;a.da.push({type:b,ca:c});d=[];f=oc(a.f);a.Ea&&f.push(new V("value",a.f));for(h=0;h<f.length;h++)f[h].type===b&&(e=new W(a.v.n,a.v.path),f[h].Q&&(e=e.B(f[h].Q)),d.push({ca:c,ic:new R(f[h].ba,e),Ya:f[h].Ya}));kc(a.Tb,d)};
zc.prototype.rb=function(a,b,c){var d=I(this.La,a.path),e=d.j();if(!(e===l||!f in e)){var f=a.sa();if("default"!==f)d=e[f].view,mc(d,b,c),0<d.da.length||(e[f].D&&(e[f].D(),delete e[f].D),delete e[f]);else{var f=[],h;for(h in e)mc(e[h].view,b,c)&&f.push(h);for(h=0;h<f.length;h++)foundQueryId=f[h],e[foundQueryId]&&!(0<e[foundQueryId].view.da.length)&&(e[foundQueryId].D&&("default"===foundQueryId&&Bc(this,d,e[foundQueryId].view.Ea),e[foundQueryId].D(),delete e[foundQueryId].D),delete e[foundQueryId])}}};
function Cc(a,b,c){Ka(I(a.La,b),function(a){if(a=a.j())for(var b in a)rc(a[b].view)},c,k)}
function X(a,b){var c=a.ac,d=a.g.Ja;a.ac=d;var e=b.toString(),f=a.La,h=c.F(b),j=d.F(b),f=new tc(f,function(b,c,d){b.toString().substring(0,e.length)===e?(Cc(a,b,m),a.ob(b,c,d),Cc(a,b,k)):a.ob(b,c,d)}),n=uc(f,b,h,j),j=h.i()!==j.i();if(n||j)for(h=b;h.parent()!==l;){var o=c.F(h),t=d.F(h),N=h.parent();if(I(f.Sb,N).j()){var q=d.F(N),v=[],h=h.O<h.k.length?h.k[h.k.length-1]:l;if(o.e())o=q.R(h,t),v.push(new V("child_added",t,h,o));else if(t.e())v.push(new V("child_removed",o,h));else if(n&&(o=q.R(h,t),v.push(new V("child_changed",
t,h,o))),j)o=q.R(h,t),v.push(new V("child_moved",t,h,o)),n=k;f.cc(N,q,v)}h=N;j=m}Cc(a,b,k)}zc.prototype.ob=function(a,b,c){a=I(this.La,a).j();if(a!==l)for(var d in a)a[d].view.ob(b,c)};function Bc(a,b,c){b.A(function(b){var e=b.j();if(e&&"default"in e)K(!e["default"].D),e["default"].D=Ac(a,e["default"].view.v);else{if(e)for(var f in e)K(!e[f].D),e[f].D=Ac(a,e[f].view.v);Bc(a,b,c)}})}
function Ac(a,b){if(a.t){var c=b.path.toString(),d=a.t,e=Ea(b),f=Fa(e);d.V[c]=d.V[c]||{};K(!d.V[c][f],"listen() called twice for same path/queryId.");d.V[c][f]=e;d.ea&&ac(d,c,e);return w(a.t.Wc,a.t,c,Ea(b))}return ca};function Dc(a){this.P=a;this.t=new Yb(this.P,w(this.Ec,this),w(this.Bc,this),w(this.Fc,this));this.yb=new Ia;this.g=new gc;this.ma=new zc(this.t,this.g.na);this.Zb=new fc;this.Gb=new zc(l,this.Zb);Ec(this,m)}r=Dc.prototype;r.toString=function(){return(this.P.tb?"https://":"http://")+this.P.host+"/"+encodeURIComponent(String(this.P.Ha))};r.name=function(){return this.P.Ha};
r.Ec=function(a,b,c){if(9<=a.length&&a.lastIndexOf(".priority")===a.length-9)a=new G(a.substring(0,a.length-9)),b!==l&&Da.test(b)&&(b=Number(b)),c=T(this.g.ub,a).Ab(b);else if(c){var a=new G(a),c=T(this.g.ub,a),d;for(d in b)var e=Q(b[d]),c=c.w(d,e)}else a=new G(a),c=Q(b);b=this.g;d=a;e=c;U(b.ub,d,e);for(var c=T(b.S,d),f=I(b.Wa,d),h=m,j=f;j!==l;){if(j.j()!==l){h=k;break}j=j.parent()}h?b=m:(e=hc(e,c,f),e!==c?(U(b.S,d,e),b=k):b=m);b&&(a=Fc(this,a),Gc(this,a),a=a.path());X(this.ma,a)};
r.Bc=function(){Ec(this,k)};r.Fc=function(){Ec(this,m)};function Ec(a,b){var c=new G("/.info/connected");U(a.Zb,c,Q(b));X(a.Gb,c)}r.Aa=function(a,b){this.t.Aa(a,b)};r.Ka=function(){this.t.Ka()};r.wb=function(a,b,c,d){c!==l&&Da.test(c)&&(c=Number(c));this.u("set",{path:a.toString(),value:b});var b=Q(b,c),e=this.g.set(a,b),f=this;this.t.put(a.toString(),b.U(k),function(b){b="ok"===b;K(b,"put at "+a+" failed.");ic(f.g,a,e);d&&d(b)});b=Fc(this,a);Hc(this,a);Gc(this,b);X(this.ma,b.path())};
r.update=function(a,b,c){this.u("update",{path:a.toString(),value:b});var d=T(this.g.na,a),e=k,f;for(f in b)var e=m,h=Q(b[f]),d=d.w(f,h);if(e)M("update() called with empty data.  Don't do anything."),c&&c(k);else{var j=this.g.set(a,d),n=this;dc(this.t,"m",a.toString(),b,function(b){b="ok"===b;K(b,"merge at "+a+" failed.");ic(n.g,a,j);c&&c(b)},i);b=Fc(this,a);Hc(this,a);Gc(this,b);X(this.ma,b.path())}};
r.Ob=function(a,b,c){this.u("setPriority",{path:a.toString(),ia:b});var d=T(this.g.S,a).Ab(b),e=this.g.set(a,d),f=this;this.t.put(a.toString()+"/.priority",b,function(b){b="ok"===b;ic(f.g,a,e);c&&c(b)});b=Fc(this,a);Gc(this,b);X(this.ma,b.path())};r.vb=function(a,b){this.t.N(a.toString(),b)};r.bb=function(a,b,c){".info"===E(a.path)?this.Gb.bb(a,b,c):this.ma.bb(a,b,c)};r.rb=function(a,b,c){".info"===E(a.path)?this.Gb.rb(a,b,c):this.ma.rb(a,b,c)};r.Na=function(){this.t.Na()};r.Za=function(){this.t.Za()};
r.u=function(){M(this.t.id+":",arguments)};function Ic(a,b){var c=new W(a,b);return new R(T(a.g.na,b),c)};function Hc(a,b){var c=I(a.yb,b);La(c,function(b){Jc(a,b)});Jc(a,c);Ka(c,function(b){Jc(a,b)})}function Jc(a,b){var c=b.j();if(c!==l){for(var d=-1,e=[],f=0;f<c.length;f++)if(2===c[f].status)K(d===f-1,"All SENT items should be at beginning of queue."),d=f,c[f].status=4;else if(c[f].zb(),c[f].M){var h=Ic(a,b.path());e.push(w(c[f].M,l,m,h))}-1===d?J(b,l):c.length=d+1;for(f=0;f<e.length;f++)e[f]()}}
function Kc(a,b){var c=b||a.yb;b||Lc(a,c);if(!c.e())if(c.j()!==l){var d=Mc(a,c);if(0!==d.length){var e=c.path();if(2!==d[0].status&&4!==d[0].status){for(var f=0;f<d.length;f++)K(1===d[f].status,"tryToSendTransactionForNode_: items in queue should all be run."),d[f].status=2,d[f].hc++;var h=T(a.g.S,e).hash();U(a.g.S,e,T(a.g.na,e));var j=T(a.g.S,e).U(k),n=ub();J(I(a.g.Wa,e),n);a.t.put(e.toString(),j,function(b){a.u("transaction put response",{path:e.toString(),status:b});var h=I(a.g.Wa,e),j=h.j();K(j!==
l,"tryToSendTransactionsForNode_: pendingPut should not be null.");j===n&&(J(h,l),U(a.g.S,e,T(a.g.ub,e)));if("ok"===b){b=[];for(f=0;f<d.length;f++)d[f].status=3,d[f].M&&(h=Ic(a,d[f].path),b.push(w(d[f].M,l,k,h))),d[f].zb();Lc(a,c);Kc(a);for(f=0;f<b.length;f++)b[f]()}else if("datastale"===b||"disconnect"===b){if("datastale"===b)for(f=0;f<d.length;f++)d[f].status=4===d[f].status?5:1;else if("disconnect"===b)for(f=0;f<d.length;f++)d[f].status=6;b=Fc(a,e);Gc(a,b);X(a.ma,b.path())}else K(m,"Got unexpected put response to transaction: "+
b)},h)}}}else c.A(function(b){Kc(a,b)})}
function Gc(a,b){var c=b.path();U(a.g.na,c,T(a.g.S,c));var d=Mc(a,b);if(0!==d.length){for(var e=T(a.g.na,c),f=[],h=0;h<d.length;h++){var j=Ga(c,d[h].path),n=m,o;K(j!==l,"rerunTransactionsUnderNode_: relativePath should not be null.");if(5===d[h].status)n=k,o="set";else if(6===d[h].status)n=k,o="disconnect";else if(1===d[h].status)if(25<=d[h].hc)n=k,o="maxretry";else{var t=d[h].update(e.F(j).U());s(t)?(ya("transaction failed: Data returned ",t),e=e.$a(j,Q(t))):(n=k,o="nodata")}n&&(d[h].zb(),d[h].status=
3,d[h].M&&(n=new W(a,d[h].path),j=new R(e.F(j),n),f.push(w(d[h].M,l,m,j,o))))}d=T(a.g.S,c).i();U(a.g.na,c,e.Ab(d));Kc(a);for(h=0;h<f.length;h++)f[h]()}}function Fc(a,b){for(var c,d=a.yb;(c=E(b))!==l&&d.j()===l;)d=I(d,c),b=H(b);return d}function Mc(a,b){var c=[];Nc(a,b,c);c.sort(function(a,b){return a.dc-b.dc});return c}function Nc(a,b,c){var d=b.j();if(d!==l)for(var e=0;e<d.length;e++)c.push(d[e]);b.A(function(b){Nc(a,b,c)})}
function Lc(a,b){var c=b.j();if(c){for(var d=0,e=0;e<c.length;e++)3!==c[e].status&&(c[d]=c[e],d++);c.length=d;J(b,0<c.length?c:l)}b.A(function(b){Lc(a,b)})};function Y(){this.ta={}}Y.Xb=function(){return Y.$b?Y.$b:Y.$b=new Y};Y.prototype.Na=function(){for(var a in this.ta)this.ta[a].Na()};Y.prototype.interrupt=Y.prototype.Na;Y.prototype.Za=function(){for(var a in this.ta)this.ta[a].Za()};Y.prototype.resume=Y.prototype.Za;var Z={Qc:function(){return Y.Xb().ta}};Z.repos=Z.Qc;Z.uc=function(a){var b=P.prototype.hash;P.prototype.hash=a;return function(){P.prototype.hash=b}};Z.hijackHash=Z.uc;Z.sa=function(a){return a.sa()};Z.queryIdentifier=Z.sa;Z.wc=function(a){return a.n.t.V};Z.listens=Z.wc;Z.Oc=function(a){return a.n.t.aa};Z.refConnection=Z.Oc;Z.nc=S;Z.RealTimeConnection=Z.nc;S.prototype.sendRequest=S.prototype.wa;S.prototype.close=S.prototype.close;Z.mc=cb;Z.ConnectionTarget=Z.mc;var Oc,Pc=0,Qc=[];Oc=function(){var a=(new Date).getTime()+Bb,b=a===Pc;Pc=a;for(var c=Array(8),d=7;0<=d;d--)c[d]="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(a%64),a=Math.floor(a/64);K(0===a);a=c.join("");if(b){for(d=11;0<=d&&63===Qc[d];d--)Qc[d]=0;Qc[d]++}else for(d=0;12>d;d++)Qc[d]=Math.floor(64*Math.random());for(d=0;12>d;d++)a+="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(Qc[d]);K(20===a.length,"NextPushId: Length should be 20.");return a};function W(){var a,b,c;if(arguments[0]instanceof Dc)c=arguments[0],a=arguments[1];else{z("new Firebase",1,2,arguments.length);var d=arguments[0];b=a="";var e=k,f="";if(u(d)){var h=d.indexOf("//");0<=h&&(e="http:"!==d.substring(0,h),d=d.substring(h+2));h=d.indexOf("/");if(0<h){a=d.substring(0,h);d=d.substring(h+1);h=d.indexOf("/");if(0<h){b=d.substring(0,h);f="";d=d.substring(h).split("/");for(h=0;h<d.length;h++)if(0<d[h].length){var j=d[h];try{j=decodeURIComponent(j.replace(/\+/g," "))}catch(n){}f+=
"/"+j}}else b=d,f="/";b=b.toLowerCase()}}a=new cb(a,e,b);b=new G(f);e=b.toString();if(!(f=!u(a.host)))if(!(f=0===a.host.length))if(!(f=!wa(a.Ha)))if(f=0!==e.length)e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),f=!(u(e)&&0!==e.length&&!va.test(e));f&&g(Error(A("new Firebase",1,m)+"must be a valid firebase URL."));arguments[1]?arguments[1]instanceof Y?c=arguments[1]:g(Error("Expected a valid Firebase.Context for second argument to new Firebase()")):c=Y.Xb();e=(a.tb?"https://":"http://")+a.host+"/"+a.Ha;
f=c.ta[e];f||(f=new Dc(a),c.ta[e]=f);c=f;a=b}F.call(this,c,a)}ja(W,F);var Rc=W,Sc=["Firebase"],$=ba;!(Sc[0]in $)&&$.execScript&&$.execScript("var "+Sc[0]);for(var Tc;Sc.length&&(Tc=Sc.shift());)!Sc.length&&s(Rc)?$[Tc]=Rc:$=$[Tc]?$[Tc]:$[Tc]={};W.prototype.name=function(){z("Firebase.name",0,0,arguments.length);return this.path.e()?this.n.name():this.path.O<this.path.k.length?this.path.k[this.path.k.length-1]:l};W.prototype.name=W.prototype.name;
W.prototype.B=function(a){z("Firebase.child",1,1,arguments.length);if(fa(a))a=String(a);else if(!(a instanceof G))if(E(this.path)===l){var b=a;b&&(b=b.replace(/^\/*\.info(\/|$)/,"/"));Ca("Firebase.child",b)}else Ca("Firebase.child",a);return new W(this.n,this.path.B(a))};W.prototype.child=W.prototype.B;W.prototype.parent=function(){z("Firebase.parent",0,0,arguments.length);var a=this.path.parent();return a===l?l:new W(this.n,a)};W.prototype.parent=W.prototype.parent;
W.prototype.toString=function(){z("Firebase.toString",0,0,arguments.length);var a;if(this.parent()===l)a=this.n.toString();else{a=this.parent().toString()+"/";var b=this.name();a+=encodeURIComponent(String(b))}return a};W.prototype.toString=W.prototype.toString;W.prototype.set=function(a,b){z("Firebase.set",1,2,arguments.length);C("Firebase.set",this.path);xa("Firebase.set",a,m);B("Firebase.set",2,b,k);return this.n.wb(this.path,a,l,b)};W.prototype.set=W.prototype.set;
W.prototype.update=function(a,b){z("Firebase.update",1,2,arguments.length);C("Firebase.update",this.path);ga(a)||g(Error(A("Firebase.update",1,m)+" must be an object containing the children to replace."));xa("Firebase.update",a,m);B("Firebase.update",2,b,k);return this.n.update(this.path,a,b)};W.prototype.update=W.prototype.update;
W.prototype.wb=function(a,b,c){z("Firebase.setWithPriority",2,3,arguments.length);C("Firebase.setWithPriority",this.path);xa("Firebase.setWithPriority",a,m);za("Firebase.setWithPriority",2,b,m);B("Firebase.setWithPriority",3,c,k);(".length"===this.name()||".keys"===this.name())&&g("Firebase.setWithPriority failed: "+this.name()+" is a read-only object.");return this.n.wb(this.path,a,b,c)};W.prototype.setWithPriority=W.prototype.wb;
W.prototype.remove=function(a){z("Firebase.remove",0,1,arguments.length);C("Firebase.remove",this.path);B("Firebase.remove",1,a,k);this.set(l,a)};W.prototype.remove=W.prototype.remove;
W.prototype.transaction=function(a,b){function c(){}z("Firebase.transaction",1,2,arguments.length);C("Firebase.transaction",this.path);B("Firebase.transaction",1,a,m);B("Firebase.transaction",2,b,k);(".length"===this.name()||".keys"===this.name())&&g("Firebase.transaction failed: "+this.name()+" is a read-only object.");var d=this.n,e=this.path;d.u("transaction on "+e);var f=new W(d,e);f.Jb("value",c);var h={path:e,update:a,M:b,dc:ub(),hc:0,zb:function(){f.Ib("value",c)}},j=d.g.na,n=h.update(T(j,
e).U());if(s(n)){ya("transaction failed: Data returned ",n);var o=T(d.g.S,e).i();U(j,e,Q(n,o));X(d.ma,e);h.status=1;e=I(d.yb,e);j=e.j()||[];j.push(h);J(e,j);Kc(d)}else h.zb(),h.M&&(d=Ic(d,e),h.M(m,d))};W.prototype.transaction=W.prototype.transaction;W.prototype.Ob=function(a,b){z("Firebase.setPriority",1,2,arguments.length);C("Firebase.setPriority",this.path);za("Firebase.setPriority",1,a,m);B("Firebase.setPriority",2,b,k);a!==l&&Da.test(a)&&(a=Number(a));this.n.Ob(this.path,a,b)};
W.prototype.setPriority=W.prototype.Ob;W.prototype.push=function(a,b){z("Firebase.push",0,2,arguments.length);C("Firebase.push",this.path);xa("Firebase.push",a,k);B("Firebase.push",2,b,k);var c=Oc(),c=this.B(c);"undefined"!==typeof a&&a!==l&&c.set(a,b);return c};W.prototype.push=W.prototype.push;W.prototype.Pc=function(){z("Firebase.removeOnDisconnect",0,0,arguments.length);this.n.vb(this.path,l)};W.prototype.removeOnDisconnect=W.prototype.Pc;
W.prototype.vb=function(a){z("Firebase.setOnDisconnect",1,1,arguments.length);xa("Firebase.setOnDisconnect",a,m);this.n.vb(this.path,a)};W.prototype.setOnDisconnect=W.prototype.vb;W.prototype.pc=function(a,b){this.Aa(a,b)};W.prototype.authAdmin=W.prototype.pc;W.prototype.Aa=function(a,b){z("Firebase.authAdmin",1,2,arguments.length);u(a)||g(Error(A("Firebase.authAdmin",1,m)+"must be a valid credential (a string)."));B("Firebase.authAdmin",2,b,k);this.n.Aa(a,b)};W.prototype.auth=W.prototype.Aa;
W.prototype.Vc=function(){this.Ka()};W.prototype.unauthAdmin=W.prototype.Vc;W.prototype.Ka=function(){this.n.Ka()};W.prototype.unauth=W.prototype.Ka;W.enableLogging=function(a){a===k?"undefined"!==typeof console&&(yb=w(console.log,console)):yb=a?a:l};W.TEST_HOOKS=Z;W.Context=Y;})();
